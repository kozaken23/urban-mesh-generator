# <h1>urban-mesh-generator</h1>

このプログラムは、都市空間をVRMLで再現するものです。上空から測定された1m間隔の高さデータをPythonで処理し、処理後のデータをVRML形式で出力します。Pythonによるデータ処理において、以下の工夫を行いました。

<h3>1. 欠損点の補完</h3>
測定データには欠損点が存在するため、欠損点の8近傍の点の平均値を欠損点に代入しました。
<h3>2. データ削減</h3>
測定データをそのまま使用するとデータ量が膨大となり、表示時に動作が遅くなるため、データ削減を行いました。具体的には、2×2の4マスをその平均値で1点に圧縮しました。これにより、データ量を約74.9%削減することができました。
<h3>3. ドロネーの三角形分割を用いたポリゴン化</h3>
Pythonのドロネー関数を使用してVRML化を行いました。ドロネーの三角形分割による最近傍探索を用いることで、効率的にポリゴン化を行うことができました。
<h3>4. 地面と建物の判定</h3>
地面と建物を深さ優先探索によって分割するプログラムです。具体的には、高さデータの最頻値を始点とし、その点と4近傍の点との高さ差があらかじめ決めた範囲内であれば地面と判定する条件を付加した深さ優先探索のプログラムを実装しています。

<h2>操作説明</h2>
<li>準備</li>
x1 y1 z1
x2 y2 z2
x3 y3 z3
・・・
のように表記された座標データを用意する

<li>欠損店補完</li>
使用するプログラム：“kessonten.py”
"input_filename" をデータファイル名にして実行
  
<li>地面・建物判定</li>
使用するプログラム：“kessonten.py”
"input_filename" を欠損店補完したデータファイル名にして実行

<li>データ削減</li>
使用するプログラム：”sakugen_final.cpp”
一つ目のinput_filenameを”jimen.dat”、 output_filenameを, ”sjimen.dat”にし、二つ目のinput_filenameを”tatemono.dat”、 output_filenameを, ”statemono.dat”にして地面と建物のデータを削減する。

<li>VRML化</li>
使用するプログラム：“fusion.py”
”sjimen.dat”,”statemono.dat”をVRML化し、”final.wrl”を作成する。
